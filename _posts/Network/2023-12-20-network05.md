# 1. 다른 네트워크 간의 통신

`네트워크 계층`에서는 네트워크 간의 통신을 가능하게 한다. 같은 네트워크 상의 컴퓨터로 정보를 전달할 때는 Ethernet과 스위치를 통해 소통이 가능했지만, 다른 네트워크 상의 컴퓨터로 데이터를 보내려면 MAC주소 외에 네트워크 주소가 추가로 필요하다.
네트워크를 식별하는 데 사용되는 주소를 `IP 주소`라고 한다. IP(Internet Protocol)는 네트워크 계층에서 사용되는 프로토콜이다. 네트워크 계층에서 다른 네트워크로 데이터를 전송하기 위해 `라우터(router)`라는 장비가 필요하다. 라우터는 데이터가 목적지까지 가는데 최적의 경로를 알려주는 역할을 한다. 이처럼 목적지 IP주소까지 어떤 경로로 데이터를 보낼지 결정하는 것을 `라우팅(routing)`이라고 한다. 라우터에는 `라우팅 테이블(routing table)`이 있어서 경로 정보를 등록하고 관리한다.
네트워크 계층에서 데이터를 캡슐화할 때, 데이터 앞에 IP 헤더를 붙인다.

`라우터` : 서로 다른 네트워크를 연결해 주는 장치
`라우팅 테이블` : 컴퓨터 네트워크에서 목적지 주소를 목적지에 도달하기 위한 네트워크 노선으로 변환시킬 목적으로 사용되는 정보.


# 2. IP 주소

IP 주소는 ISP(인터넷 서비스 제공자)에게 받을 수 있다.

IP는 2가지 버전이 있다.
- IPv4 : 32비트
- IPv6 : 128비트

IPv4는 32비트이기 때문에 표현할 수 있는 주소에 한계가 있어서 IPv6가 등장하게 되었다.
IPv4로 표현할 수 있는 주소가 현재 필요로 하는 IP 주소의 수보다 부족하기 때문에 현재는 `공인 IP 주소`와 `사설 IP 주소`를 사용하고 있다.
참고로 공인 IP 주소는 ISP가 제공한다.

- 공인 IP 주소 : 인터넷에 직접 연결되는 컴퓨터나 라우터에 할당
- 사설 IP 주소 : 회사나 가정의 랜에 있는 컴퓨터에 할당

비트로 인한 IP 주소 수의 한계를 극복하기 위해 공인 IP는 라우터에 할당하고, 각 컴퓨터에는 랜의 네트워크 관리자가 자유롭게 사설 IP 주소를 할당하거나 라우터의 DHCP 기능을 사용하여 주소를 자동으로 할당한다.
이런 식으로 IP를 사용하면 공인 IP 주소를 절약할 수 있다. 사설 IP 주소는 한 네트워크 내에서 배정하는 주소기 때문에 서로 다른 네트워크 끼리는 중복이 될 수 있다.

IP 주소를 표시할 때, 사람이 읽기 편하도록 8비트 단위로 나눠서 표시하는데, 이를 `옥텟(octet)`이라고 한다.

ex. 11000100 11100100 000011000 00000010 -> 4개의 옥텟
이를 더 읽기 편하도록 10진수로 변환하여 표시하기도 한다.
=> 136.196.24.2

IP 주소는 `네트워크 주소`와 `호스트 주소`로 구성되어 있다.
네트워크 주소는 어떤 네트워크인지를 나타내며, 호스트 주소는 해당 네트워크의 어떤 컴퓨터인지를 나타낸다.

IP 주소는 A~E 클래스로 구분하며 일반적으로는 A~C 클래스를 사용한다.
A 클래스는 처음 1 옥텟을 네트워크 ID, 나머지 3 옥텟을 호스트 ID로 사용한다.
B 클래스는 처음 2 옥텟을 네트워크 ID, 나머지 2 옥텟을 호스트 ID로 사용하며
C 클래스는 처음 3 옥텟을 네트워크 ID, 나머지 1 옥텟을 호스트 ID로 사용한다.

A 클래스에서 네트워크 ID의 범위는 00000001 ~ 01111111이며,
B 클래스에서 네트워크 ID의 범위는 10000000 00000000 ~ 10111111 11111111,
C 클래스에서 네트워크 ID의 범위는 11000000 00000000 00000000 ~ 11011111 11111111 11111111이다.

`네트워크 주소`를 표현할 때, 호스트 주소에 해당하는 비트는 0으로 채워 놓는다.
A 클래스 네트워크의 경우, 마지막 옥텟이 호스트 주소에 해당하므로 네트워크 주소가 192.168.1에 해당하는 경우를 예를 들면 다음과 같이 표현할 수 있다.
ex. 192.168.1.0

`브로드캐스트 주소`는 해당 네트워크에 존재하는 모든 컴퓨터에 한번에 데이터를 전송할 때 사용하는 주소이다.
브로드 캐스트 주소는 호스트 주소에 해당하는 비트를 전부 1로 채워 놓는다.
192.168.1에 해당하는 네트워크의 경우, 다음과 같다.
ex. 192.168.1.255


# 3. Subnet

분할된 네트워크를 말하며, 네트워크를 분할하는 것을 subneting이라고 한다. 서브넷팅을 할 때, 호스트 ID에 해당하는 비트를 서브넷 ID로 사용한다. 따라서 "네트워크 ID + 호스트 ID"였던 구성이 "네트워크 ID + 서브넷 ID + 호스트 ID"로 바뀐다. 이렇게 서브넷 ID까지 사용하면 네트워크 ID가 어디까지인지 구분하기 힘들어진다. 이 때 이를 구분하기 위해 `Subnet Mask`라는 것을 사용한다.

서브넷 마스크는 네트워크 ID를 알아내기 위한 수단으로, A 클래스의 경우 처음 1옥텟이 네트워크 ID이므로 255.0.0.0, B 클래스의 경우 255.255.0.0, C 클래스의 경우 255.255.255.0이 된다. 이를 prefix 표기법으로도 표현할 수 있는데, 각각은 /8, /16, /24가 된다. 슬래쉬 이후에 몇 비트를 네트워크 ID로 표현하는 지를 나타낸다.

자신의 IP 주소와 서브넷 마스크를 &연산(비트 연산)하면 네트워크 ID를 구할 수 있다.

